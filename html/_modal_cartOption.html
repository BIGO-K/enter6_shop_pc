<!DOCTYPE html>
<html lang="ko" class="__mm_modal__">
<head>
	<meta charset="utf-8">
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"> -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no, address=no, email=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

	<!-- 소셜태그 -->
	<meta property="og:title" content="">
	<meta property="og:description" content="">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<!--// 소셜태그 -->

	<title>(팝업) 옵션 변경 - 엔터식스 온라인몰</title>

	<!-- 라이브러리 css -->
	<link rel="stylesheet" href="../css/libs/fontello-custom.css">
	<link rel="stylesheet" href="../css/libs/swiper-4.4.6.min.css">
	<link rel="stylesheet" href="../css/libs/overlayscrollbars-1.6.1.min.css">
	<link rel="stylesheet" href="../css/libs/pikaday.css">

	<!-- 페이지 css -->
    <link rel="stylesheet" href="../css/fonts.css">
    <link rel="stylesheet" href="../css/app.css">

	<!-- (D) 스크립트(폴리필, 라이브러리)는 요청을 줄이기 위해 combind + minify를 적용해주세요. -->
	<!-- 폴리필 스크립트 -->
	<script src="../js/polyfill/es6-promise.auto-4.2.4.min.js"></script>

	<!-- 라이브러리 스크립트 -->
	<!-- <script src="../js/libs/webfontloader-1.6.28.min.js"></script> -->
	<script src="../js/libs/jquery-3.3.1.slim.min.js"></script>
	<script src="../js/libs/axios-0.18.0.min.js"></script>
	<script src="../js/libs/underscore-1.9.1.min.js"></script>
	<script src="../js/libs/load-image.all-2.20.1.min.js"></script>
	<script src="../js/libs/tweenmax-2.0.2.min.js"></script>
	<script src="../js/libs/swiper-4.4.6.min.js"></script>
	<script src="../js/libs/overlayscrollbars-1.6.1.min.js"></script>
	<script src="../js/libs/moment-2.23.0.min.js"></script>
	<script src="../js/libs/pikaday-1.8.0.min.js"></script>
	<script src="../js/libs/sortable-1.6.0.min.js"></script>
	<!-- <script src="../js/libs/handlebars-4.0.12.min.js"></script> -->
	<!-- <script src="../js/libs/template7-1.4.0.min.js"></script> -->
	<!-- <script src="../js/libs/vue-2.5.21.min.js"></script> -->
	<!-- <script src="../js/libs/autoNumeric-4.1.0.min.js"></script> -->
	<!-- <script src="../js/libs/chart-2.7.3.min.js"></script> -->
	<!-- <script src="../js/libs/ckeditor.full-4.10.0/ckeditor.js"></script> -->
	
	<!-- 공통 선언 스크립트 -->
	<script src="../js/app_common.js"></script>

	<!-- (D) 페이지 공통 스크립트는 body 하단, 전용 스크립트는 .mm_page-content 하단에 넣어주세요. -->
</head>
<body>
	<div id="mm_app" class="mm_app">
		<!-- 스킵 -->
		<nav class="mm_skip">
			<ul>
				<li><a href="#mm_body" data-href="anchor">본문바로가기</a></li>
			</ul>
		</nav>
		<!-- 스킵 -->
		
		<!-- 화면 -->
		<div class="mm_view">
			<!-- 헤더 -->
			<div class="mm_header">
				<h1 class="mm_title"><span>옵션 변경</span></h1>
				<button type="button" class="btn_modal-close" onclick="mm.modal.close();"><i class="mco_modal-close"></i><span class="mm_ir-blind">모달 닫기</span></button>
			</div>
			<!--// 헤더 -->

			<!-- 내용 -->
			<div id="mm_body" class="mm_page">
				<div class="mm_scroller" data-scrollbar>
					<!-- 본문 -->
					<div class="mm_page-content">
						<!-- (D) 실제 내용을 추가하는 부분입니다. -->
						
						<!-- (D) iframe 모달은 html 요소에 '__mm_modal__' 클래스를 추가합니다. -->
						<div class="mm_modal-frame m-modal-changeoption">
							<div class="m-prodetail-head-option">
								<section class="m--option-item">
									<h5><span>옵션 1</span></h5>
									<div class="mm_dropdown" data-dropdown="{ '_isMotion': false }">
										<button type="button" class="btn_dropdown"><span>(필수) 옵션을 선택해 주세요</span><i class="mco_dropdown __mco_lg__"></i></button>
										<div class="mm_dropdown-item">
											<div class="mm_dropdown-item-inner">
												<section>
													<h6><span>옵션 선택</span></h6>
													<div class="mm_check-list">
														<ul>
															<li>
																<label class="mm_form-check">
																	<input type="checkbox" class="form_check_word" data-check="{ 'syncer': '.mm_syncer-search-select' }">
																	<b class="mm_box-block">
																		<i class="mco_form-check"></i>
																		<span class="text_label">옵션검색</span>
																	</b>
																</label>
															</li>
															<li>
																<label class="mm_form-check">
																	<input type="checkbox" class="form_check_soldout">
																	<b class="mm_box-block">
																		<i class="mco_form-check"></i>
																		<span class="text_label">품절제외</span>
																	</b>
																</label>
															</li>
														</ul>
														<div class="mm_syncer-search-select">
															<div class="mm_form-text">
																<button type="button" class="btn_text-clear"><i class="mco_form-clear"></i><span class="mm_ir-blind">지우기</span></button>
																<label>
																	<input type="text" class="textfield form_text_word"><i class="bg_text"></i>
																	<span class="text_placeholder">찾으시는 옵션명을 검색하세요</span>
																</label>
															</div>
														</div>
													</div>
													<div class="mm_scroller m--option-item-list" data-scrollbar>
														<!--
															(D) 페이지 접속 시 옵션 1, 2의 내용을 전부 넣어줍니다.
															a요소에 data-option="{ '_name': '이름', '_price': 42290, 'groups': ['옵션1', '옵션2'], '_isSoldout': false, results: {}  }" 속성을 추가합니다.
															_name 값은 .text_option 요소에 넣을 값으로 옵션 검색에서 사용됩니다.
															_price 값은 합계를 계산하기위해 사용됩니다.
															groups 값은 옵션을 선택했을 때 노출 할 다음 단계 옵션을 묶어주고, 최종 옵션을 선택할 때 노출할 결과 '옵션1/옵션2/옵션3'로 사용됩니다.
															_isSoldout 값이 true 일 때 품절상품의 a요소에 "__soldout" 클래스가 추가됩니다.
															results 값이 있으면 최종 옵션을 선택할 때 노출하는 옵션 영역에 'data-results' 속성을 추가하여 값을 전달합니다.
															results 는 마지막 옵션에만 넣어줍니다.
															옵션 2에는 data-optid="고유번호" 를 추가합니다.(상세설명 옵션선택 버튼 클릭 시 비교 값으로 사용)
														-->
														<ul>
															<li>
																<a href="javascript:void(0);" data-option="{ '_name': '선택01. (013)아이보리', '_price': 42290, 'groups': ['선택01. (013)아이보리'], '_isSoldout': false  }">
																	<figure class="mm_box-flex">
																		<i class="mm_preload mm_bg-contain image_product" data-preload="{ '_src': '../images/_sample/product_x100_1.jpg' }"></i>
																		<figcaption class="mm_flex-equal">
																			<span class="text_option">선택01. (013)아이보리</span>
																			<div class="mm_box-rside">
																				<strong class="text_price">42,290</strong>
																				<span class="mm_text-primary">매진임박 9개</span>
																			</div>
																		</figcaption>
																	</figure>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-option="{ '_name': '선택02. (072)그린', '_price': 42290, 'groups': ['선택02. (072)그린'], '_isSoldout': true  }">
																	<figure class="mm_box-flex">
																		<i class="mm_preload mm_bg-contain image_product" data-preload="{ '_src': '../images/_sample/product_x100_2.jpg' }"></i>
																		<figcaption class="mm_flex-equal">
																			<span class="text_option">선택02. (072)그린</span>
																			<div class="mm_box-rside">
																				<strong class="text_soldout">품절</strong>
																			</div>
																		</figcaption>
																	</figure>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-option="{ '_name': '선택03. (019)블랙', '_price': 42290, 'groups': ['선택03. (019)블랙'], '_isSoldout': false  }">
																	<figure class="mm_box-flex">
																		<i class="mm_preload mm_bg-contain image_product" data-preload="{ '_src': '../images/_sample/product_x100_3.jpg' }"></i>
																		<figcaption class="mm_flex-equal">
																			<span class="text_option">선택03. (019)블랙</span>
																			<div class="mm_box-rside">
																				<strong class="text_price">42,290</strong>
																			</div>
																		</figcaption>
																	</figure>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-option="{ '_name': '선택04. (020)블루', '_price': 42290, 'groups': ['선택04. (020)블루'], '_isSoldout': false  }">
																	<figure class="mm_box-flex">
																		<i class="mm_preload mm_bg-contain image_product" data-preload="{ '_src': '../images/_sample/product_x100_4.jpg' }"></i>
																		<figcaption class="mm_flex-equal">
																			<span class="text_option">선택04. (020)블루</span>
																			<div class="mm_box-rside">
																				<strong class="text_price">42,290</strong>
																				<span class="mm_ir-blind">매진임박 9개</span>
																			</div>
																		</figcaption>
																	</figure>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-option="{ '_name': '선택05. (037)레드', '_price': 42290, 'groups': ['선택05. (037)레드'], '_isSoldout': true  }">
																	<figure class="mm_box-flex">
																		<i class="mm_preload mm_bg-contain image_product" data-preload="{ '_src': '../images/_sample/product_x100_5.jpg' }"></i>
																		<figcaption class="mm_flex-equal">
																			<span class="text_option">선택05. (037)레드</span>
																			<div class="mm_box-rside">
																				<strong class="text_soldout">품절</strong>
																			</div>
																		</figcaption>
																	</figure>
																</a>
															</li>
														</ul>
													</div>
												</section>
											</div>
										</div>
									</div>
								</section>
								<section class="m--option-item">
									<h5><span>옵션 2</span></h5>
									<div class="mm_dropdown" data-dropdown="{ '_isMotion': false }">
										<button type="button" class="btn_dropdown"><span>(필수) 옵션을 선택해 주세요</span><i class="mco_dropdown __mco_lg__"></i></button>
										<div class="mm_dropdown-item">
											<div class="mm_dropdown-item-inner">
												<section>
													<h6><span>옵션 선택</span></h6>
													<div class="mm_check-list">
														<ul>
															<li>
																<label class="mm_form-check">
																	<input type="checkbox" class="form_check_word" data-check="{ 'syncer': '.mm_syncer-search-option' }">
																	<b class="mm_box-block">
																		<i class="mco_form-check"></i>
																		<span class="text_label">옵션검색</span>
																	</b>
																</label>
															</li>
															<li>
																<label class="mm_form-check">
																	<input type="checkbox" class="form_check_soldout">
																	<b class="mm_box-block">
																		<i class="mco_form-check"></i>
																		<span class="text_label">품절제외</span>
																	</b>
																</label>
															</li>
														</ul>
														<div class="mm_syncer-search-option">
															<div class="mm_form-text">
																<button type="button" class="btn_text-clear"><i class="mco_form-clear"></i><span class="mm_ir-blind">지우기</span></button>
																<label>
																	<input type="text" class="textfield form_text_word"><i class="bg_text"></i>
																	<span class="text_placeholder">찾으시는 옵션명을 검색하세요</span>
																</label>
															</div>
														</div>
													</div>
													<div class="mm_scroller m--option-item-list" data-scrollbar>
														<!--
															(D) 페이지 접속 시 옵션 1, 2의 내용을 전부 넣어줍니다.
															a요소에 data-option="{ '_name': '이름', '_price': 42290, 'groups': ['옵션1', '옵션2'], '_isSoldout': false, results: {}  }" 속성을 추가합니다.
															_name 값은 .text_option 요소에 넣을 값으로 옵션 검색에서 사용됩니다.
															_price 값은 합계를 계산하기위해 사용됩니다.
															groups 값은 옵션을 선택했을 때 노출 할 다음 단계 옵션을 묶어주고, 최종 옵션을 선택할 때 노출할 결과 '옵션1/옵션2/옵션3'로 사용됩니다.
															_isSoldout 값이 true 일 때 품절상품의 a요소에 "__soldout" 클래스가 추가됩니다.
															results 값이 있으면 최종 옵션을 선택할 때 노출하는 옵션 영역에 'data-results' 속성을 추가하여 값을 전달합니다.
															results 는 마지막 옵션에만 넣어줍니다.
															옵션 2에는 data-optid="고유번호" 를 추가합니다.(상세설명 옵션선택 버튼 클릭 시 비교 값으로 사용)
														-->
														<ul>
															<li>
																<a href="javascript:void(0);" data-optid="1" data-option="{ '_name': '옵션01. 사이즈 44', '_price': 42290, 'groups': ['선택01. (013)아이보리', '44'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0001' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션01. 사이즈 44</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="2" data-option="{ '_name': '옵션02. 사이즈 55', '_price': 42290, 'groups': ['선택01. (013)아이보리', '55'], '_isSoldout': true, '_max': 0, 'results': { 'sample': 'sample0002' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션02. 사이즈 55</span>
																		<strong class="text_soldout">품절</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="3" data-option="{ '_name': '옵션03. 사이즈 66', '_price': 42290, 'groups': ['선택01. (013)아이보리', '66'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0003' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션03. 사이즈 66</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="4" data-option="{ '_name': '옵션04. 사이즈 77', '_price': 42290, 'groups': ['선택01. (013)아이보리', '77'], '_isSoldout': true, '_max': 0, 'results': { 'sample': 'sample0004' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션04. 사이즈 77</span>
																		<strong class="text_soldout">품절</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="5" data-option="{ '_name': '옵션05. 사이즈 88', '_price': 42290, 'groups': ['선택01. (013)아이보리', '88'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0005' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션05. 사이즈 88</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="10" data-option="{ '_name': '옵션10. 사이즈 44', '_price': 42290, 'groups': ['선택03. (019)블랙', '44'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0010' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션10. 사이즈 44</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="11" data-option="{ '_name': '옵션11. 사이즈 55', '_price': 42290, 'groups': ['선택03. (019)블랙', '55'], '_isSoldout': true, '_max': 0, 'results': { 'sample': 'sample0011' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션11. 사이즈 55</span>
																		<strong class="text_soldout">품절</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="12" data-option="{ '_name': '옵션12. 사이즈 66', '_price': 42290, 'groups': ['선택03. (019)블랙', '66'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0012' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션12. 사이즈 66</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="13" data-option="{ '_name': '옵션13. 사이즈 55', '_price': 42290, 'groups': ['선택04. (020)블루', '55'], '_isSoldout': true, '_max': 0, 'results': { 'sample': 'sample0013' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션13. 사이즈 55</span>
																		<strong class="text_soldout">품절</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="14" data-option="{ '_name': '옵션14. 사이즈 66', '_price': 42290, 'groups': ['선택04. (020)블루', '66'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0014' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션14. 사이즈 66</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
															<li>
																<a href="javascript:void(0);" data-optid="15" data-option="{ '_name': '옵션15. 사이즈 77', '_price': 42290, 'groups': ['선택04. (020)블루', '77'], '_isSoldout': false, '_max': 30, 'results': { 'sample': 'sample0015' } }">
																	<div class="mm_box-flex">
																		<span class="text_option">옵션15. 사이즈 77</span>
																		<strong class="text_price">42,290</strong>
																	</div>
																</a>
															</li>
														</ul>
													</div>
												</section>
											</div>
										</div>
									</div>
								</section>
								<div class="m--option-selected">
									<!-- <ul>
										<li>
											<p class="text_selected">선택01. (013) 아이보리 / 사이즈 44</p>
											<strong class="text_price">42,290</strong>
											<div class="mm_stepper">
												<div class="mm_form-text">
													<label>
														<input type="text" class="textfield"><i class="bg_text"></i>
														<span class="text_placeholder mm_ir-blind">수량</span>
													</label>
												</div>
												<button type="button" class="btn_stepper-subtract"><i class="mco_subtract"></i><span class="mm_ir-blind">수량 빼기</span></button>
												<button type="button" class="btn_stepper-add"><i class="mco_add"></i><span class="mm_ir-blind">수량 더하기</span></button>
											</div>
											<button type="button" class="btn_remove"><i class="mco_remove"></i><span class="mm_ir-blind">선택 삭제</span></button>
										</li>
									</ul> -->
									<p class="text_option-none">옵션을 선택하세요</p>
								</div>
							</div>
							
							<div class="mm_btngroup">
								<div class="mm_box-inline">
									<button type="button" class="mm_btn __btn_xl_line__" onclick="mm.modal.close();"><span>취소하기</span></button>
									<button type="button" class="mm_btn __btn_xl_primary__"><span>변경하기</span></button>
								</div>
							</div>
						</div>
						
						<!-- 현재 페이지 스크립트 -->
						<script>
						
						$(function() {
							
							var $doc = $(document);
							
							// 옵션, 합계
							(function() {
								
								$('.m-prodetail-head-option').each(function(__index) {
									
									var $el = $(this);
									var $option = $el.find('.m--option-item');
									var $selected = $el.find('.m--option-selected');
									
									var PROD_OPTION_NEXT = 'PROD_OPTION_NEXT';// 옵션선택(단계)
									var PROD_OPTION_SELECT = 'PROD_OPTION_SELECT';// 옵션선택(최종)
									var PROD_OPTION_QTY = 'PROD_OPTION_QTY';// 옵션수량변경
									
									// 옵션선택
									$option.each(function(__i) {
										
										var $ui = $(this);
										var $list = $ui.find('.m--option-item-list');
										var $listItem = $list.find('li > a');
										var $formCheckSoldout = $ui.find('.form_check_soldout');
										var $formCheckWord = $ui.find('.form_check_word');
										var $formTextWord = $ui.find('.form_text_word');
										var $btnDropdown = $ui.find('.btn_dropdown');
										
										if (__i > 0) $btnDropdown.attr({ 'disabled': true });
										
										// 옵션열림
										$ui.children('.mm_dropdown').data('mm.dropdown').onOpen = function() {
											
											mm.anchor(0, { scroller: mm.getScroller($ui), _time: 0 });
											
											// 닫기
											$doc.on('click', optionClose);
											
											// 초기화
											mm.form.update($formCheckWord.prop({ 'checked': false }));
											mm.form.update($formCheckSoldout.prop({ 'checked': false }));
											
										};
										
										// 옵션닫힘
										function optionClose(__e) {
											
											var $dropdown = $ui.children('.mm_dropdown');
											
											if (!__e || !$(__e.target).closest($dropdown)[0]) {
												mm.dropdown.close($dropdown);
												$doc.off('click', optionClose);
											}
											
										}
										
										// 옵션리스트확인
										function optionCheckVisible() {
											
											var $listUl = $list.find('ul');
											$listUl.show();
											
											if ($listItem.filter(':visible')[0]) {
												$listUl.next('.mm_text-none').remove();
											}
											else {
												$listUl.hide()
												.after(function() {
													
													return ($list.find('.mm_text-none')[0]) ? null : '<p class="mm_text-none">조건에 해당하는 옵션이 없습니다.</p>';
													
												});
											}
											
										} 
										
										// 검색어찾기
										$formCheckWord.data('mm.check').onChange = function() {
											
											if (!$(this).is(':checked')) mm.form.update($formTextWord.val(''));
											
										};
										
										$formTextWord.on('keyup change', function() {
											
											var _word = $.trim($(this).val());
											var classNone = '__none-word';
											
											$listItem.each(function() {
												
												var $item = $(this);
												var $textOption = $item.find('.text_option');
												var datas = JSON.parse($item.attr('data-option').replace(/\'/g, '"'));
												
												if (_word.length == 0) $textOption.text(datas._name);
												else {
													$textOption.html(function() {
														
														return datas._name.replace(new RegExp(mm.escapeRegExp(_word), 'gi'), function(__text) {
															
															return '<em class="mm_text-primary">' + __text + '</em>';
															
														});
														
													});
												}
												
												if ($textOption.find('.mm_text-primary')[0] || _word.length == 0) $item.parent().removeClass(classNone);
												else $item.parent().addClass(classNone);
												
											});
											
											optionCheckVisible();
											
										});
										
										// 품절제외
										$formCheckSoldout.data('mm.check').onChange = function() {
											
											var $soldout = $listItem.filter('.__soldout');
											var classNone = '__none-soldout';
											
											if ($(this).is(':checked')) $soldout.parent().addClass(classNone);
											else $soldout.parent().removeClass(classNone);
											
											optionCheckVisible();
											
										};
										
										// 리스트세팅, 선택
										$listItem.each(function() {
											
											var $item = $(this);
											var datas = JSON.parse($item.attr('data-option').replace(/\'/g, '"'));
											
											if (datas._isSoldout == true) $item.addClass('__soldout');
											
											$item.not('.__soldout').on('click', function(__e) {
												
												// 옵션단계
												if (__i < $option.length - 1) {
													$('<span class="text_option" />').text(datas._name).prependTo($btnDropdown).siblings('.text_option').remove();
													mm.observer.update(PROD_OPTION_NEXT, { datas: $.extend(true, datas, { _index: __i }) });
												}
												// 최종옵션
												else mm.observer.update(PROD_OPTION_SELECT, { datas: $.extend(true, datas, { item: $item }) });
												optionClose();
												
											});
											
										});
										
										// 다음옵션세팅
										mm.observer.set($ui, PROD_OPTION_NEXT, function(__e, __datas) {
											
											if (__i != __datas._index + 1) return;
											
											var classNone = '__none-group';
											
											$btnDropdown.attr({ 'disabled': false });
											$listItem.each(function() {
												
												var $item = $(this);
												var _groups = JSON.parse($item.attr('data-option').replace(/\'/g, '"')).groups.join('/');
												
												if (_groups.match(new RegExp(mm.escapeRegExp(__datas.groups.join('/')), 'i'))) $item.parent().removeClass(classNone);
												else $item.parent().addClass(classNone);
												
											});
											mm.instant(mm.dropdown.open, { args: [$ui.children('.mm_dropdown')] });
											
										});
										
										// 옵션초기화
										mm.observer.set($ui, PROD_OPTION_SELECT, function(__e, __datas) {
											
											if (__i > 0) $btnDropdown.attr({ 'disabled': true });
											$btnDropdown.find('.text_option').remove();
											
										});
										
									});
									
									// 선택한옵션 삭제
									$selected.on('click', '.btn_remove', function(__e) {
										
										var $li = $(this).closest('li');
										var _removeIndex = $li.index();
										
										mm.observer.update(PROD_OPTION_QTY, { datas: { _elIndex: __index, element: null, _removeIndex: _removeIndex } });
										
									});
									
									// 선택한옵션 생성
									mm.observer.set($selected, PROD_OPTION_SELECT, function(__e, __datas) {
										
										// 이미 있음
										if ($selected.find('li').is(function() {
											
											return $(this).find('.text_selected').text() == __datas.groups.join('/');
											
										})) {
											if ($('.__bom')[0]) return;
											else return mm.bom.alert('이미 선택된 옵션입니다.');
										}
										
										var $selectedList = ($selected.find('ul')[0]) ? $selected.find('ul') : (__index == 0) ? $('<ul />').prependTo($selected) : $('<ul />').prependTo($selected.find('.os-content'));
										var $selectedItem = $(''
										+ '<li data-price="' + __datas._price + '" data-results=" ' + JSON.stringify(__datas.results).replace(/"/g, '\'') + ' ">'
											+ '<p class="text_selected">' + __datas.groups.join('/') + '</p>'
											+ '<strong class="text_price">' + mm.numberComma(__datas._price) + '</strong>'
											+ '<div class="mm_stepper" data-stepper="' + JSON.stringify({ _max: __datas._max }).replace(/"/g, '\'') + '">'
												+ '<div class="mm_form-text">'
													+ '<label>'
														+ '<input type="text" class="textfield"><i class="bg_text"></i>'
														+ '<span class="text_placeholder mm_ir-blind">수량</span>'
													+ '</label>'
												+ '</div>'
												+ '<button type="button" class="btn_stepper-subtract"><i class="mco_subtract"></i><span class="mm_ir-blind">수량 빼기</span></button>'
												+ '<button type="button" class="btn_stepper-add"><i class="mco_add"></i><span class="mm_ir-blind">수량 더하기</span></button>'
											+ '</div>'
											+ '<button type="button" class="btn_remove"><i class="mco_remove"></i><span class="mm_ir-blind">선택 삭제</span></button>'
										+ '</li>'
										+ '').prependTo($selectedList);

										$selectedItem.on('change', '.textfield', function() {
											
											var $this = $(this);
											mm.observer.update(PROD_OPTION_QTY, { datas: { _elIndex: __index, element: $this } });
											
										}).siblings().remove();// 새로 추가되는 li를 제외한 모든 li 제거
										
										mm.form.update($selectedItem);
										
									});
									
									// 수량, 합계
									mm.observer.set($el, PROD_OPTION_QTY, function(__e, __datas) {
										
										mm.instant(function() {
											
											var _totalPrice = 0;
											var _totalQty = 0;
											
											$selected.find('li').each(function(__i) {
												
												var $this = $(this);
												
												if (__index != __datas._elIndex && __datas.element && __i == __datas.element.closest('li').index()) mm.stepper.update($this.find('.textfield').val(__datas.element.val()));
												if (__datas._removeIndex != null && __i == __datas._removeIndex) {
													$this.off().remove();
													if ($selected.find('li').length == 0) $selected.find('ul').remove();
													return;
												}
												
												var _qty = parseFloat($this.find('.mm_stepper .textfield').val());
												var _price = parseFloat($this.data('price')) * _qty;
												_totalQty += _qty;
												_totalPrice += _price;
												
												$this.find('.text_price').text(mm.numberComma(_price));
												
											});
											
										})
										
									});
									
								});
								
							})();
							
						});
						</script>
					</div>
					<!--// 본문 -->
				</div>
			</div>
			<!--// 내용 -->
		</div>
		<!--// 화면 -->
		
		<!-- 공통 페이지 스크립트 -->
		<script src="../js/app_page-common.js"></script>
		<!-- <script src="../js/app_common.js"></script> -->
	</div>
</body>
</html>
