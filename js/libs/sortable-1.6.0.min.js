/*
핸들 사용 시 체크박스 드래드 오류로
savedInputChecked = []; 으로 변경
_saveInputCheckedState(el); 실행을 마지막으로 변경
*/
(function sortableModule(a){if(typeof define==="function"&&define.amd){define(a)}else{if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=a()}else{window.Sortable=a()}}})(function sortableFactory(){if(typeof window=="undefined"||!window.document){return function ak(){throw new Error("Sortable.js requires a window with a document")}}var M,q,P,w,ah,s,l,af,v,O,t,S,k,aj,N,h,L,J={},D,H,e,n=/\s+/g,c=/left|right|inline/,ac="Sortable"+(new Date).getTime(),Z=window,g=Z.document,p=Z.parseInt,I=Z.jQuery||Z.Zepto,ab=Z.Polymer,Q=false,m=!!("draggable" in g.createElement("div")),ad=(function(al){if(!!navigator.userAgent.match(/Trident.*rv[ :]?11\./)){return false}al=g.createElement("x");al.style.cssText="pointer-events:auto";return al.style.pointerEvents==="auto"})(),u=false,E=Math.abs,ai=Math.min,X=[],U=[],j=i(function(aA,aB,az){if(az&&aB.scroll){var ap=az[ac],al,ax,au=aB.scrollSensitivity,an=aB.scrollSpeed,ay=aA.clientX,aw=aA.clientY,am=window.innerWidth,ao=window.innerHeight,av,at,ar,aq;if(v!==az){af=aB.scroll;v=az;O=aB.scrollFn;if(af===true){af=az;do{if((af.offsetWidth<af.scrollWidth)||(af.offsetHeight<af.scrollHeight)){break}}while(af=af.parentNode)}}if(af){al=af;ax=af.getBoundingClientRect();av=(E(ax.right-ay)<=au)-(E(ax.left-ay)<=au);at=(E(ax.bottom-aw)<=au)-(E(ax.top-aw)<=au)}if(!(av||at)){av=(am-ay<=au)-(ay<=au);at=(ao-aw<=au)-(aw<=au);(av||at)&&(al=Z)}if(J.vx!==av||J.vy!==at||J.el!==al){J.el=al;J.vx=av;J.vy=at;clearInterval(J.pid);if(al){J.pid=setInterval(function(){aq=at?at*an:0;ar=av?av*an:0;if("function"===typeof(O)){return O.call(ap,ar,aq,aA)}if(al===Z){Z.scrollTo(Z.pageXOffset+ar,Z.pageYOffset+aq)}else{al.scrollTop+=aq;al.scrollLeft+=ar}},24)}}}},30),C=function(am){function an(aq,ap){if(aq===void 0||aq===true){aq=ao.name}if(typeof aq==="function"){return aq}else{return function(au,at){var ar=at.options.group.name;return ap?aq:aq&&(aq.join?aq.indexOf(ar)>-1:(ar==aq))}}}var ao={};var al=am.group;if(!al||typeof al!="object"){al={name:al}}ao.name=al.name;ao.checkPull=an(al.pull,true);ao.checkPut=an(al.put);ao.revertClone=al.revertClone;am.group=ao};function a(ao,am){if(!(ao&&ao.nodeType&&ao.nodeType===1)){throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(ao)}this.el=ao;this.options=am=A({},am);ao[ac]=this;var ap={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(ao.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(ar,aq){ar.setData("Text",aq.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var al in ap){!(al in am)&&(am[al]=ap[al])}C(am);for(var an in this){if(an.charAt(0)==="_"&&typeof this[an]==="function"){this[an]=this[an].bind(this)}}this.nativeDraggable=am.forceFallback?false:m;G(ao,"mousedown",this._onTapStart);G(ao,"touchstart",this._onTapStart);G(ao,"pointerdown",this._onTapStart);if(this.nativeDraggable){G(ao,"dragover",this);G(ao,"dragenter",this)}U.push(this._onDragOver);am.store&&this.sort(am.store.get(this))}a.prototype={constructor:a,_onTapStart:function(av){var aq=this,ao=this.el,aw=this.options,al=aw.preventOnFilter,at=av.type,ap=av.touches&&av.touches[0],ar=(ap||av).target,an=av.target.shadowRoot&&av.path[0]||ar,am=aw.filter,au;if(M){return}if(at==="mousedown"&&av.button!==0||aw.disabled){return}ar=aa(ar,aw.draggable,ao);if(!ar){return}if(l===ar){return}au=K(ar,aw.draggable);if(typeof am==="function"){if(am.call(this,av,ar,this)){B(aq,an,"filter",ar,ao,au);al&&av.preventDefault();return}}else{if(am){am=am.split(",").some(function(ax){ax=aa(an,ax.trim(),ao);if(ax){B(aq,ax,"filter",ar,ao,au);return true}});if(am){al&&av.preventDefault();return}}}if(aw.handle&&!aa(an,aw.handle,ao)){return}this._prepareDragStart(av,ap,ar,au);b(ao)},_prepareDragStart:function(ar,am,ap,aq){var an=this,al=an.el,at=an.options,au=al.ownerDocument,ao;if(ap&&!M&&(ap.parentNode===al)){D=ar;ah=al;M=ap;q=M.parentNode;s=M.nextSibling;l=ap;h=at.group;aj=aq;this._lastX=(am||ar).clientX;this._lastY=(am||ar).clientY;M.style["will-change"]="transform";ao=function(){an._disableDelayedDrag();M.draggable=an.nativeDraggable;o(M,at.chosenClass,true);an._triggerDragStart(ar,am);B(an,ah,"choose",M,ah,aj)};at.ignore.split(",").forEach(function(av){T(M,av.trim(),r)});G(au,"mouseup",an._onDrop);G(au,"touchend",an._onDrop);G(au,"touchcancel",an._onDrop);G(au,"pointercancel",an._onDrop);G(au,"selectstart",an);if(at.delay){G(au,"mouseup",an._disableDelayedDrag);G(au,"touchend",an._disableDelayedDrag);G(au,"touchcancel",an._disableDelayedDrag);G(au,"mousemove",an._disableDelayedDrag);G(au,"touchmove",an._disableDelayedDrag);G(au,"pointermove",an._disableDelayedDrag);an._dragStartTimer=setTimeout(ao,at.delay)}else{ao()}}},_disableDelayedDrag:function(){var al=this.el.ownerDocument;clearTimeout(this._dragStartTimer);V(al,"mouseup",this._disableDelayedDrag);V(al,"touchend",this._disableDelayedDrag);V(al,"touchcancel",this._disableDelayedDrag);V(al,"mousemove",this._disableDelayedDrag);V(al,"touchmove",this._disableDelayedDrag);V(al,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(al,an){an=an||(al.pointerType=="touch"?al:null);if(an){D={target:M,clientX:an.clientX,clientY:an.clientY};this._onDragStart(D,"touch")}else{if(!this.nativeDraggable){this._onDragStart(D,true)}else{G(M,"dragend",this);G(ah,"dragstart",this._onDragStart)}}try{if(g.selection){setTimeout(function(){g.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(am){}},_dragStarted:function(){if(ah&&M){var al=this.options;o(M,al.ghostClass,true);o(M,al.dragClass,false);a.active=this;B(this,ah,"start",M,ah,aj)}else{this._nulling()}},_emulateDragOver:function(){if(H){if(this._lastX===H.clientX&&this._lastY===H.clientY){return}this._lastX=H.clientX;this._lastY=H.clientY;if(!ad){Y(P,"display","none")}var an=g.elementFromPoint(H.clientX,H.clientY),am=an,al=U.length;if(am){do{if(am[ac]){while(al--){U[al]({clientX:H.clientX,clientY:H.clientY,target:an,rootEl:am})}break}an=am}while(am=am.parentNode)}if(!ad){Y(P,"display","")}}},_onTouchMove:function(an){if(D){var aq=this.options,ap=aq.fallbackTolerance,al=aq.fallbackOffset,at=an.touches?an.touches[0]:an,ao=(at.clientX-D.clientX)+al.x,am=(at.clientY-D.clientY)+al.y,ar=an.touches?"translate3d("+ao+"px,"+am+"px,0)":"translate("+ao+"px,"+am+"px)";if(!a.active){if(ap&&ai(E(at.clientX-this._lastX),E(at.clientY-this._lastY))<ap){return}this._dragStarted()}this._appendGhost();e=true;H=at;Y(P,"webkitTransform",ar);Y(P,"mozTransform",ar);Y(P,"msTransform",ar);Y(P,"transform",ar);an.preventDefault()}},_appendGhost:function(){if(!P){var an=M.getBoundingClientRect(),am=Y(M),al=this.options,ao;P=M.cloneNode(true);o(P,al.ghostClass,false);o(P,al.fallbackClass,true);o(P,al.dragClass,true);Y(P,"top",an.top-p(am.marginTop,10));Y(P,"left",an.left-p(am.marginLeft,10));Y(P,"width",an.width);Y(P,"height",an.height);Y(P,"opacity","0.8");Y(P,"position","fixed");Y(P,"zIndex","100000");Y(P,"pointerEvents","none");al.fallbackOnBody&&g.body.appendChild(P)||ah.appendChild(P);ao=P.getBoundingClientRect();Y(P,"width",an.width*2-ao.width);Y(P,"height",an.height*2-ao.height)}},_onDragStart:function(al,an){var ao=al.dataTransfer,am=this.options;this._offUpEvents();if(h.checkPull(this,this,M,al)){w=y(M);w.draggable=false;w.style["will-change"]="";Y(w,"display","none");o(w,this.options.chosenClass,false);ah.insertBefore(w,M);B(this,ah,"clone",M)}o(M,am.dragClass,true);if(an){if(an==="touch"){G(g,"touchmove",this._onTouchMove);G(g,"touchend",this._onDrop);G(g,"touchcancel",this._onDrop);G(g,"pointermove",this._onTouchMove);G(g,"pointerup",this._onDrop)}else{G(g,"mousemove",this._onTouchMove);G(g,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,50)}else{if(ao){ao.effectAllowed="move";am.setData&&am.setData.call(this,ao,M)}G(g,"drop",this);setTimeout(this._dragStarted,0)}},_onDragOver:function(ax){var al=this.el,aI,ar,aA,am,ap=this.options,av=ap.group,au=a.active,an=(h===av),at=false,aH=ap.sort;if(ax.preventDefault!==void 0){ax.preventDefault();!ap.dragoverBubble&&ax.stopPropagation()}if(M.animated){return}e=true;if(au&&!ap.disabled&&(an?aH||(am=!ah.contains(M)):(L===this||((au.lastPullMode=h.checkPull(this,au,M,ax))&&av.checkPut(this,au,M,ax))))&&(ax.rootEl===void 0||ax.rootEl===this.el)){j(ax,ap,this.el);if(u){return}aI=aa(ax.target,ap.draggable,al);ar=M.getBoundingClientRect();if(L!==this){L=this;at=true}if(am){z(au,true);q=ah;if(w||s){ah.insertBefore(M,w||s)}else{if(!aH){ah.appendChild(M)}}return}if((al.children.length===0)||(al.children[0]===P)||(al===ax.target)&&(R(al,ax))){if(al.children.length!==0&&al.children[0]!==P&&al===ax.target){aI=al.lastElementChild}if(aI){if(aI.animated){return}aA=aI.getBoundingClientRect()}z(au,an);if(F(ah,al,M,ar,aI,aA,ax)!==false){if(!M.contains(al)){al.appendChild(M);q=al}this._animate(ar,M);aI&&this._animate(aA,aI)}}else{if(aI&&!aI.animated&&aI!==M&&(aI.parentNode[ac]!==void 0)){if(t!==aI){t=aI;S=Y(aI);k=Y(aI.parentNode)}aA=aI.getBoundingClientRect();var aB=aA.right-aA.left,az=aA.bottom-aA.top,ay=c.test(S.cssFloat+S.display)||(k.display=="flex"&&k["flex-direction"].indexOf("row")===0),aD=(aI.offsetWidth>M.offsetWidth),aF=(aI.offsetHeight>M.offsetHeight),aC=(ay?(ax.clientX-aA.left)/aB:(ax.clientY-aA.top)/az)>0.5,aw=aI.nextElementSibling,ao=false;if(ay){var aq=M.offsetTop,aE=aI.offsetTop;if(aq===aE){ao=(aI.previousElementSibling===M)&&!aD||aC&&aD}else{if(aI.previousElementSibling===M||M.previousElementSibling===aI){ao=(ax.clientY-aA.top)/az>0.5}else{ao=aE>aq}}}else{if(!at){ao=(aw!==M)&&!aF||aC&&aF}}var aG=F(ah,al,M,ar,aI,aA,ax,ao);if(aG!==false){if(aG===1||aG===-1){ao=(aG===1)}u=true;setTimeout(d,30);z(au,an);if(!M.contains(al)){if(ao&&!aw){al.appendChild(M)}else{aI.parentNode.insertBefore(M,ao?aw:aI)}}q=M.parentNode;this._animate(ar,M);this._animate(aA,aI)}}}}},_animate:function(al,ao){var am=this.options.animation;if(am){var an=ao.getBoundingClientRect();if(al.nodeType===1){al=al.getBoundingClientRect()}Y(ao,"transition","none");Y(ao,"transform","translate3d("+(al.left-an.left)+"px,"+(al.top-an.top)+"px,0)");ao.offsetWidth;Y(ao,"transition","all "+am+"ms");Y(ao,"transform","translate3d(0,0,0)");clearTimeout(ao.animated);ao.animated=setTimeout(function(){Y(ao,"transition","");Y(ao,"transform","");ao.animated=false},am)}},_offUpEvents:function(){var al=this.el.ownerDocument;V(g,"touchmove",this._onTouchMove);V(g,"pointermove",this._onTouchMove);V(al,"mouseup",this._onDrop);V(al,"touchend",this._onDrop);V(al,"pointerup",this._onDrop);V(al,"touchcancel",this._onDrop);V(al,"pointercancel",this._onDrop);V(al,"selectstart",this)},_onDrop:function(al){var an=this.el,am=this.options;clearInterval(this._loopId);clearInterval(J.pid);clearTimeout(this._dragStartTimer);V(g,"mousemove",this._onTouchMove);if(this.nativeDraggable){V(g,"drop",this);V(an,"dragstart",this._onDragStart)}this._offUpEvents();if(al){if(e){al.preventDefault();!am.dropBubble&&al.stopPropagation()}P&&P.parentNode&&P.parentNode.removeChild(P);if(ah===q||a.active.lastPullMode!=="clone"){w&&w.parentNode&&w.parentNode.removeChild(w)}if(M){if(this.nativeDraggable){V(M,"dragend",this)}r(M);M.style["will-change"]="";o(M,this.options.ghostClass,false);o(M,this.options.chosenClass,false);B(this,ah,"unchoose",M,ah,aj);if(ah!==q){N=K(M,am.draggable);if(N>=0){B(null,q,"add",M,ah,aj,N);B(this,ah,"remove",M,ah,aj,N);B(null,q,"sort",M,ah,aj,N);B(this,ah,"sort",M,ah,aj,N)}}else{if(M.nextSibling!==s){N=K(M,am.draggable);if(N>=0){B(this,ah,"update",M,ah,aj,N);B(this,ah,"sort",M,ah,aj,N)}}}if(a.active){if(N==null||N===-1){N=aj}B(this,ah,"end",M,ah,aj,N);this.save()}}}this._nulling()},_nulling:function(){ah=M=q=P=s=w=l=af=v=D=H=e=N=t=S=L=h=a.active=null;X.forEach(function(al){al.checked=true});X=[]},handleEvent:function(al){switch(al.type){case"drop":case"dragend":this._onDrop(al);break;case"dragover":case"dragenter":if(M){this._onDragOver(al);W(al)}break;case"selectstart":al.preventDefault();break}},toArray:function(){var al=[],ap,ao=this.el.children,an=0,aq=ao.length,am=this.options;for(;an<aq;an++){ap=ao[an];if(aa(ap,am.draggable,this.el)){al.push(ap.getAttribute(am.dataIdAttr)||f(ap))}}return al},sort:function(al){var am={},an=this.el;this.toArray().forEach(function(aq,ao){var ap=an.children[ao];if(aa(ap,this.options.draggable,an)){am[aq]=ap}},this);al.forEach(function(ao){if(am[ao]){an.removeChild(am[ao]);an.appendChild(am[ao])}})},save:function(){var al=this.options.store;al&&al.set(this)},closest:function(am,al){return aa(am,al||this.options.draggable,this.el)},option:function(am,an){var al=this.options;if(an===void 0){return al[am]}else{al[am]=an;if(am==="group"){C(al)}}},destroy:function(){var al=this.el;al[ac]=null;V(al,"mousedown",this._onTapStart);V(al,"touchstart",this._onTapStart);V(al,"pointerdown",this._onTapStart);if(this.nativeDraggable){V(al,"dragover",this);V(al,"dragenter",this)}Array.prototype.forEach.call(al.querySelectorAll("[draggable]"),function(am){am.removeAttribute("draggable")});U.splice(U.indexOf(this._onDragOver),1);this._onDrop();this.el=al=null}};function z(am,al){if(am.lastPullMode!=="clone"){al=true}if(w&&(w.state!==al)){Y(w,"display",al?"none":"");if(!al){if(w.state){if(am.options.group.revertClone){ah.insertBefore(w,s);am._animate(M,w)}else{ah.insertBefore(w,M)}}}w.state=al}}function aa(an,al,am){if(an){am=am||g;do{if((al===">*"&&an.parentNode===am)||x(an,al)){return an}}while(an=ae(an))}return null}function ae(am){var al=am.host;return(al&&al.nodeType)?al:am.parentNode}function W(al){if(al.dataTransfer){al.dataTransfer.dropEffect="move"}al.preventDefault()}function G(am,an,al){am.addEventListener(an,al,Q)}function V(am,an,al){am.removeEventListener(an,al,Q)}function o(an,al,ao){if(an){if(an.classList){an.classList[ao?"add":"remove"](al)}else{var am=(" "+an.className+" ").replace(n," ").replace(" "+al+" "," ");an.className=(am+(ao?" "+al:"")).replace(n," ")}}}function Y(am,ao,an){var al=am&&am.style;if(al){if(an===void 0){if(g.defaultView&&g.defaultView.getComputedStyle){an=g.defaultView.getComputedStyle(am,"")}else{if(am.currentStyle){an=am.currentStyle}}return ao===void 0?an:an[ao]}else{if(!(ao in al)){ao="-webkit-"+ao}al[ao]=an+(typeof an==="string"?"":"px")}}}function T(al,an,ao){if(al){var ap=al.getElementsByTagName(an),am=0,aq=ap.length;if(ao){for(;am<aq;am++){ao(ap[am],am)}}return ap}return[]}function B(am,ap,al,au,an,ao,aq){am=(am||ap[ac]);var ar=g.createEvent("Event"),av=am.options,at="on"+al.charAt(0).toUpperCase()+al.substr(1);ar.initEvent(al,true,true);ar.to=ap;ar.from=an||ap;ar.item=au||ap;ar.clone=w;ar.oldIndex=ao;ar.newIndex=aq;ap.dispatchEvent(ar);if(av[at]){av[at].call(am,ar)}}function F(aq,an,ao,av,ax,al,ar,au){var aw,ap=aq[ac],at=ap.options.onMove,am;aw=g.createEvent("Event");aw.initEvent("move",true,true);aw.to=an;aw.from=aq;aw.dragged=ao;aw.draggedRect=av;aw.related=ax||an;aw.relatedRect=al||an.getBoundingClientRect();aw.willInsertAfter=au;aq.dispatchEvent(aw);if(at){am=at.call(ap,aw,ar)}return am}function r(al){al.draggable=false}function d(){u=false}function R(an,al){var am=an.lastElementChild,ao=am.getBoundingClientRect();return(al.clientY-(ao.top+ao.height)>5)||(al.clientX-(ao.left+ao.width)>5)}function f(an){var ao=an.tagName+an.className+an.src+an.href+an.textContent,al=ao.length,am=0;while(al--){am+=ao.charCodeAt(al)}return am.toString(36)}function K(an,al){var am=0;if(!an||!an.parentNode){return -1}while(an&&(an=an.previousElementSibling)){if((an.nodeName.toUpperCase()!=="TEMPLATE")&&(al===">*"||x(an,al))){am++}}return am}function x(ao,am){if(ao){am=am.split(".");var al=am.shift().toUpperCase(),an=new RegExp("\\s("+am.join("|")+")(?=\\s)","g");return((al===""||ao.nodeName.toUpperCase()==al)&&(!am.length||((" "+ao.className+" ").match(an)||[]).length==am.length))}return false}function i(ao,am){var al,an;return function(){if(al===void 0){al=arguments;an=this;setTimeout(function(){if(al.length===1){ao.call(an,al[0])}else{ao.apply(an,al)}al=void 0},am)}}}function A(an,am){if(an&&am){for(var al in am){if(am.hasOwnProperty(al)){an[al]=am[al]}}}return an}function y(al){return I?I(al).clone(true)[0]:(ab&&ab.dom?ab.dom(al).cloneNode(true):al.cloneNode(true))}function b(an){var am=an.getElementsByTagName("input");var al=am.length;while(al--){var ao=am[al];ao.checked&&X.push(ao)}}G(g,"touchmove",function(al){if(a.active){al.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Q={capture:false,passive:false}}}))}catch(ag){}a.utils={on:G,off:V,css:Y,find:T,is:function(am,al){return !!aa(am,al,am)},extend:A,throttle:i,closest:aa,toggleClass:o,clone:y,index:K};a.create=function(am,al){return new a(am,al)};a.version="1.6.0";return a});
